angular.module("baseConfig",[]).constant("baseConfig",{debug:!1,isMobilePlatform:!1,clearTable:!0,basePath:"http://wechat.hand-china.com/hmbms_hand/api",currentVersion:"2.0.0",url:"",pkgIdentifier:"",versionName:"此版本为UAT测试环境 2.0.0",appEnvironment:"UAT"}),angular.module("utilModule",[]).factory("httpRequestHeader",function(){var e={request:function(e){if(window.localStorage.token&&window.localStorage.userName){var o=(new Date).getTime(),t=CryptoJS.MD5(window.localStorage.token+o);e.headers.timestamp=o,e.headers.token=t,e.headers.loginName=window.localStorage.userName}return e}};return e});var loginModule=angular.module("loginModule",[]),messageModule=angular.module("messageModule",[]),contactModule=angular.module("contactModule",[]),applicationModule=angular.module("applicationModule",[]),myInfoModule=angular.module("myInfoModule",[]),tsApproveModule=angular.module("tsApproveModule",[]);angular.module("myApp",["ionic","ngCordova","loginModule","baseConfig","messageModule","contactModule","applicationModule","myInfoModule","utilModule","tsApproveModule"]),angular.module("myApp").run(function(e){e.ready(function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}),angular.module("myApp").config(["$stateProvider","$urlRouterProvider","$httpProvider","$ionicConfigProvider",function(e,o,t,a){t.interceptors.push("httpRequestHeader"),a.platform.ios.tabs.style("standard"),a.platform.ios.tabs.position("bottom"),a.platform.android.tabs.style("standard"),a.platform.android.tabs.position("standard"),a.platform.ios.navBar.alignTitle("center"),a.platform.android.navBar.alignTitle("center"),a.platform.android.backButton.previousTitleText("").icon("ion-android-arrow-back"),a.platform.ios.views.transition("ios"),a.platform.android.views.transition("android"),e.state("tab",{url:"/tab","abstract":!0,templateUrl:"build/pages/tab/tabs.html"}).state("tab.message",{url:"/message",views:{"tab-message":{templateUrl:"build/pages/message/message.html",controller:"messageCtrl"}}}).state("tab.messageDetail",{url:"/messageDetail",params:{message:{}},views:{"tab-message":{templateUrl:"build/pages/message/detail/messageDetail.html",controller:"messageDetailCtrl"}}}).state("tab.contact",{url:"/contact",views:{"tab-contact":{templateUrl:"build/pages/contact/contact.html",controller:"contactCtrl"}}}).state("tab.application",{url:"/application",views:{"tab-application":{templateUrl:"build/pages/application/application.html",controller:"applicationCtrl"}}}).state("tab.myInfo",{url:"/myInfo",views:{"tab-myInfo":{templateUrl:"build/pages/myInfo/myInfo.html",controller:"myInfoCtrl"}}}).state("guide",{url:"/guide",templateUrl:"build/pages/guide/guide.html",controller:"guideCtrl"}).state("login",{url:"/guide",templateUrl:"build/pages/login/login.html",controller:"loginCtrl"}).state("tab.tsApproveList",{url:"application/tsApproveList",views:{"tab-application":{templateUrl:"build/pages/application/timeSheet-approve/list/tsApproveList.html",controller:"tsApproveListCtrl"}}}).state("tab.tsApproveDetail",{url:"application/tsApproveDetail",views:{"tab-application":{templateUrl:"build/pages/application/timeSheet-approve/detail/tsApproveDetail.html",controller:"tsApproveDetailCtrl"}}}),o.otherwise("/guide")}]),angular.module("applicationModule").controller("applicationCtrl",["$scope","$state","baseConfig",function(e,o,t){e.officeApp=[{appName:"会议管理",imageUrl:"build/img/application/meetingManage@3x.png",destUrl:""},{appName:"个人申请",imageUrl:"build/img/application/meetingManage@3x.png",destUrl:""},{appName:"报表分析",imageUrl:"build/img/application/meetingManage@3x.png",destUrl:""},{appName:"人事政策",imageUrl:"build/img/application/meetingManage@3x.png",destUrl:""},{appName:"假期管理",imageUrl:"build/img/application/holidayManage@3x.png",destUrl:""},{appName:"Timesheet填写",imageUrl:"build/img/application/timesheet@3x.png",destUrl:""},{appName:"Timesheet填写",imageUrl:"build/img/application/timesheet@3x.png",destUrl:""},{appName:"Timesheet审批",imageUrl:"build/img/application/timesheetExamine@3x.png",destUrl:"tab.tsApproveList"},{appName:"",imageUrl:"",destUrl:""}],e.projectApp=[{appName:"机票预定",imageUrl:"build/img/application/flightBooking@3x.png",destUrl:""},{appName:"代办事项",imageUrl:"build/img/application/flightBooking@3x.png",destUrl:""},{appName:"报销单查询",imageUrl:"build/img/application/flightBooking@3x.png",destUrl:""},{appName:"首款查询",imageUrl:"build/img/application/flightBooking@3x.png",destUrl:""},{appName:"外勤汇报",imageUrl:"build/img/application/flightBooking@3x.png",destUrl:""},{appName:"",imageUrl:"",destUrl:""},{appName:"",imageUrl:"",destUrl:""},{appName:"",imageUrl:"",destUrl:""}],e.employeeApp=[{appName:"在线培训",imageUrl:"build/img/application/flightBooking@3x.png",destUrl:""},{appName:"知识门户",imageUrl:"build/img/application/flightBooking@3x.png",destUrl:""},{appName:"新闻",imageUrl:"build/img/application/flightBooking@3x.png",destUrl:""},{appName:"分享社区",imageUrl:"build/img/application/flightBooking@3x.png",destUrl:""}],e.goPage=function(e){t.debug&&console.log("appItem "+angular.toJson(e)),o.go(e.destUrl)},console.log("applicationCtrl.enter"),e.$on("$ionicView.enter",function(e){console.log("applicationCtrl.$ionicView.enter")}),e.$on("$destroy",function(e){console.log("applicationCtrl.$destroy")})}]),angular.module("contactModule").controller("contactCtrl",["$scope","$state",function(e,o){console.log("contactCtrl.enter"),e.$on("$ionicView.enter",function(e){console.log("contactCtrl.$ionicView.enter")}),e.$on("$destroy",function(e){console.log("contactCtrl.$destroy")})}]),angular.module("loginModule").controller("guideCtrl",["$scope","$state",function(e,o){console.log("loginCtrl.enter"),e.toLogin=function(){console.log("跳过导航页到登陆页"),o.go("login")},e.$on("$ionicView.enter",function(e){console.log("guideCtrl.$ionicView.enter")}),e.$on("$destroy",function(e){console.log("guideCtrl.$destroy")})}]),angular.module("loginModule").controller("loginCtrl",["$scope","$state","baseConfig","$ionicLoading","$http",function(e,o,t,a,l){e.loginData={},e.currentVersionNum=t.currentVersion,console.log("loginCtrl.enter"),e.savePassword=function(){e.checkbox_savePwd=!e.checkbox_savePwd,console.log("此时密码框的状态为 :",angular.toJson(e.checkbox_savePwd)),""!==e.loginData.password&&(e.checkbox_savePwd===!0?window.localStorage.password=e.loginData.password:window.localStorage.password="")},e.doLogin=function(){window.localStorage.empno=e.loginData.username,e.checkbox_savePwd?window.localStorage.password=e.loginData.password:window.localStorage.password="",a.show({template:"Loading..."});var n=t.basePath+"/appLogin/user_login/login",i='{"params":{"p_user_name":"'+e.loginData.username+'","p_password":"'+e.loginData.password+'"}}';l.post(n,i).success(function(l){a.hide(),t.debug&&console.log("result success "+angular.toJson(l)),"S"==l.con_status&&(window.localStorage.token=l.pre_token+l.token_key,window.localStorage.empno=e.loginData.username,o.go("tab.message"))}).error(function(e,o){a.hide(),t.debug&&console.log("response error "+angular.toJson(e))})},e.$on("$ionicView.enter",function(e){console.log("loginCtrl.$ionicView.enter")}),e.$on("$destroy",function(e){console.log("loginCtrl.$destroy")})}]),angular.module("messageModule").controller("messageCtrl",["$scope","$state","$timeout",function(e,o,t){e.messageList=[{user:"模版1",content:"内容1"},{user:"模版2",content:"内容2"},{user:"模版3",content:"内容3"},{user:"模版4",content:"内容4"},{user:"模版5",content:"内容5"},{user:"模版6",content:"内容6"},{user:"模版7",content:"内容7"},{user:"模版8",content:"内容8"},{user:"模版9",content:"内容9"},{user:"模版10",content:"内容10"}],e.talk=function(e){console.log("$scope.talk"),o.go("tab.messageDetail",{message:e})},e.refresh=function(){t(function(){e.$broadcast("scroll.refreshComplete")},2e3)},console.log("messageCtrl.enter"),e.$on("$ionicView.enter",function(e){console.log("messageCtrl.$ionicView.enter")}),e.$on("$destroy",function(e){console.log("messageCtrl.$destroy")})}]),angular.module("myInfoModule").controller("myInfoCtrl",["$scope","$state",function(e,o){console.log("myInfoCtrl.enter"),e.$on("$ionicView.enter",function(e){console.log("myInfoCtrl.$ionicView.enter")}),e.$on("$destroy",function(e){console.log("myInfoCtrl.$destroy")})}]),angular.module("messageModule").controller("messageDetailCtrl",["$scope","$state","$stateParams","$ionicHistory",function(e,o,t,a){var l=t.message;console.log("message : "+angular.toJson(l)),e.message=l,e.goBack=function(){a.goBack()},e.$on("$ionicView.enter",function(e){console.log("messageDetailCtrl.$ionicView.enter")}),console.log("messageDetailCtrl.enter"),e.$on("$destroy",function(e){console.log("messageDetailCtrl.$destroy")})}]),tsApproveModule.controller("tsApproveDetailCtrl",["$scope","$state","baseConfig","$ionicHistory",function(e,o,t,a){e.$on("$ionicView.enter",function(e){console.log("tsApproveListCtrl.$ionicView.enter")}),e.$on("$destroy",function(e){console.log("tsApproveListCtrl.$destroy")})}]),angular.module("tsApproveModule").controller("tsApproveListCtrl",["$scope","$state","baseConfig","$ionicHistory",function(e,o,t,a){e.goApproveDetail=function(){o.go("tab.tsApproveDetail")},e.$on("$ionicView.enter",function(e){console.log("tsApproveListCtrl.$ionicView.enter")}),e.$on("$destroy",function(e){console.log("tsApproveListCtrl.$destroy")})}]);
