<ion-view view-title="Timesheet审批">
  <custom-head-bar action-name="{{actionName}}" custom-title="Timesheet审批" go-back-page="$ionicGoBack()"
                   do-action="doSelectAction()">
    <div class="custom-second-head">
      <div class="row bg-input">
        <button class="button button-clear calendar-icon">
          <span class="calendar-text">日历</span>
        </button>
        <span class="calendar-end-date">截止日期: 5月21日</span>
      </div>
      <div id="connect-block" class="connect-block" ng-show="showConnectBlock">
      </div>
    </div>
  </custom-head-bar>
  <ion-content class="ts-list-bg" has-bouncing="true" on-scroll="watchScroll()" on-drag="onDrag()"
               on-drag-up="onDragUp()"
               scrollbar-y="false">
    <ion-refresher on-refresh="tsListRefresh()" pulling-text="正在刷新数据..." pulling-icon="ion-ios-loop">
    </ion-refresher>
    <div id="tsApproveList" class="ts-approve-list-item" ng-repeat="i in listInfoArray.listArray"
         ng-click="goApproveDetail($index,i.employee_number,i.project_id,i.start_date,i.end_date)">
      <div class="row first-content">
        <span class="name" ng-bind="i.employee_name"></span>
        <span class="job-number" ng-bind="i.employee_number"></span>
        <span class="city" ng-bind="i.base_address"></span>
        <span class="fly-back">flyback:</span>
        <span class="fly-icon"></span>
        <span class="fly-number" ng-cloak>x {{i.fly_back}}</span>
      </div>
      <div class="row second-content">
        <span class="name">补助:</span>
        <span class="number" ng-cloak>0*{{i.subsidy_list.length}}</span>
        <span class="number-icon" ng-click="getAttentionInfo($event,i.warn_list)" ng-if="i.warn_list.length >=1"></span>
      </div>
      <div ng-class={"select-list-ts":selectArray[$index],"un-select-list-ts":!selectArray[$index]}
           ng-if="!showDetailArrow"></div>
      <div class="arrow-item" ng-if="showDetailArrow"></div>
      <div class="row second-content">
        <span class="name">项目:</span>
        <span class="number" ng-bind="i.project_name"></span>
      </div>
    </div>
    <ion-infinite-scroll ng-if="listInfoArray.busy" on-infinite="listInfoArray.nextPage()"
                         distance="1%"></ion-infinite-scroll>
  </ion-content>
  <div id="rocket" class="rocket-icon" ng-if="showRocket" ng-click="goTsLsTop()"></div>
  <ion-footer-bar class="foot-bar" style="bottom: 0px;" ng-if="showDetailArrow">
    <div class="buttons">
      <button class="button button-clear filter-icon" ng-click="filterTsInfo()">
      </button>
      <div class="filter-text" ng-click="filterTsInfo()">筛选</div>
      <button class="button button-clear time-icon">
      </button>
      <div class="time-text">时间</div>
    </div>
  </ion-footer-bar>
  <footer-select
    ng-if="!showDetailArrow"
    select-all-item="selectAllList()"
    pass-through="passThroughListItem()"
    refuse="refuseListItem()"
  </footer-select>
</ion-view>

