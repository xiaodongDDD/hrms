<ion-view view-title="拼车列表" class="carpooling-list">
  <ion-header-bar align-title="center" class="bar-stable">
      <div class="buttons" ng-if="!showSearchTop">
        <button class="button button-icon icon ion-ios-arrow-back" ng-click="goBack()">
          <span class="back-text">返回</span>
        </button>
       </div>
      <h1 class="title"  ng-if="!showSearchTop">拼车</h1>
    <div ng-if="!showLocation">
      <ion-spinner icon="ripple" class="spinner spinner-ios" style=" position: absolute;right: 10px;margin-top: 3px;width: 20px;height: 20px;" ></ion-spinner>
    </div>

      <div class="buttons" ng-if="showLocation">
        <div class="button-location icon ion-ios-location"  ng-if="!showSearchTop">
          <span style="font-size: 15px;">{{cityCode}}</span>
        </div>
      </div>
    </div>
    <!--上滑搜索框显示在状态栏-->
    <div class="row no-padding search-input  search-input-location" ng-if="showSearchTop">
      <input type="search" class="text-input" placeholder="搜索" ng-readonly="true"
             ng-click="goSearch()"/>
      <div class="button button-icon" style="font-size: 16px;width: 60px;color: white;margin-top: -3px;" ng-click="openPopover($event)">筛选</div>
    </div>
  </ion-header-bar>
  <ion-content  class="carpooling-list-content" on-scroll="watchTopScroll()"  delegate-handle="watchTopScroll" scrollbar-y="false">

    <div class="search" >
      <div class="input1" ng-click="goSearch()">
        <i class="ion-ios-search search-i" style="margin-left: 1px"></i>
        <input name="" placeholder="搜索" ng-readonly="true"   class="search-input-content">
      </div>
      <div style="float: right;width: 13%;margin-right: 2.5%;margin-top: 13px">
        <div  class="button-filter" ng-click="openPopover($event)">筛选</div>
      </div>
    </div>

    <div class="hms-hide-content" ng-if="listLoading">
      <hms-loading></hms-loading>
    </div>

    <div ng-if="showNoData">
      <div class="no-data-shelter">
        <div class="row no-data-no-space">
          <img src="build/img/application/dorm-apply/no-data.png" class="no-data-image">
        </div>
        <div class="row no-data-no-space-label-row">
          <label class="no-data-label">{{promptText}}</label>
        </div>
      </div>
    </div>
    <ion-refresher on-refresh="doRefresh()" pulling-text="正在刷新数据..." pulling-icon="ion-ios-loop"></ion-refresher>
      <ion-list >
        <ion-item class=list-item ng-repeat="x in resultList" ng-click="viewListDetail($index)">
          <div class="car-list" style="padding: 0px 25px 0px 25px">
            <div class="car-start">
              <div class="logo-car">
                <img src="build/img/application/carpooling/car@3x.png" class="carpooling-logo">
                <div class="carpooling-font">预计{{x.departureTime}}&nbsp;&nbsp;出发</div>
              </div>
            </div>
            <div class="car-location">
              <div class="car-from text-over-hidder">
                <img src="build/img/application/carpooling/starting@3x.png" style="height: 18px;float: left;">
                <span style="font-size: 14px; margin-left: 9px"><i class="font-color2">起点：</i>&nbsp;&nbsp;<i class="font-color1">{{x.startAddr}}</i> </span>
              </div>
              <div class="vertical-line"></div>
              <div class="car-to  text-over-hidder">
                <img src="build/img/application/carpooling/ending@3x.png" style="height: 18px;float: left;">
                <span style="font-size: 14px; margin-left: 9px"><i class="font-color2">终点：</i>&nbsp;&nbsp;<i class="font-color1">{{x.targetAddr}}</i> </span>
              </div>
            </div>
            <div class="horizontal-line1" style=" width: 100%; height: 1px; background-color: #D2D2D2; margin-top: 12px;"></div>
            <div class="set-out">
              <div class="on-time">
                <span class="{{x.departurePreferenceColor}}">{{x.departurePreference}}</span>
              </div>
              <div class="remain">
                <div class="remain-seat">
                  <img src="build/img/application/carpooling/seat@3x.png" style="width: 13px;height: 12px;">
                  <span style="color: #9B9B9B;">剩余空位</span>
                </div>
                <div class="remain-number"><span style="font-size: 16px;color:#24559C;">{{x.availableSeats}}</span></div>
              </div>
            </div>
          </div>
        </ion-item>
      </ion-list>
    </div>
    <ion-infinite-scroll ng-if="showInfinite" distance="1%"  on-infinite="loadMore()" immediate-check="false"></ion-infinite-scroll>
  </ion-content>
</ion-view>
