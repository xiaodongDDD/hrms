<ion-modal-view style="width: 100vw;background: none;" class="crm hrms-pancel-corlor opportunity-add"
                ng-controller="ClueAddCtrl">
  <ion-header-bar align-title="center" class="bar-stable">
    <button class="button button-clear" ng-click="goBack()">{{ 'CANCEL' | T }}</button>
    <h2 class="title">
      {{editFlag ? ("NEW_CLUE.EDIT_CLUE" | T) : ("NEW_CLUE.ADD_CLUE" | T) }}
    </h2>
    <button class="button button-clear" ng-click="addClue()">{{ 'SAVE' | T }}</button>
  </ion-header-bar>
  <crm-loading ng-if="showCrmLoading"></crm-loading>
  <ion-content delegate-handle="slide-img">

    <div class="common-input-area">
      <div class="common-input-area-title" ng-click="hideArea(4)">
        <img src="build/img/application/opportunity/opportunity-add/icon_custom_small@3x.png"/>
        {{ 'NEW_OPPORTUNITY.CUSTOMER_INFO' | T }}
        <div>{{hideAreaFlag[4] ? ("SHOW" | T) : ("HIDE" | T) }}</div>
      </div>
      <div ng-if="!hideAreaFlag[4]">
        <hms-select-item
          label-name="titleList.customer"
          input-box="showData.customerName"
          important="true"
          hms-select="showSelectDiv('customer')">
        </hms-select-item>

        <hms-select-item
          label-name="titleList.customerContacts"
          input-box="showData.customerContactsName"
          important="true"
          hms-select="showSelectDiv('customer_contacts')"
          show-line="true">
        </hms-select-item>
      </div>
    </div>

    <div class="common-input-area">
      <div class="common-input-area-title" ng-click="hideArea(0)">
        <img src="build/img/application/opportunity/opportunity-add/icon_base_message@3x.png"/>
        {{ 'NEW_OPPORTUNITY.BASE_INFO' | T }}
        <div>{{hideAreaFlag[0] ? ("SHOW" | T) : ("HIDE" | T) }}</div>
      </div>
      <div ng-if="!hideAreaFlag[0]">

        <div class="common-item-input">
          <div class="required" ng-class="{false:'input-error'}[validNameFlag]">{{ 'NEW_CLUE.CLUE_NAME' |
            T }}{{validNameFlag ? '' : ' (重复!)'}}
          </div>
          <input type="text" placeholder="{{ 'PLEASE_INPUT' | T }}" ng-model="data.fullName" ng-blur="validName()"/>
          <div class="common-light-line-long"></div>
        </div>

        <hms-select-item
          label-name="titleList.clueStatus"
          input-box="showData.opportunityStatus"
          important="true"
          hms-select="showSelectDiv('opportunity_status')">
        </hms-select-item>
        <hms-select-item
          label-name="titleList.ownedIndustry"
          input-box="showData.industry"
          hms-select="showIndustrySelect()">
        </hms-select-item>
        <!--<hms-select-item-->
          <!--label-name="titleList.ownedIndustry"-->
          <!--input-box="showData.industry"-->
          <!--important="true"-->
          <!--hms-select="showSelectDiv('owned_industry')">-->
        <!--</hms-select-item>-->

        <hms-select-item
          label-name="titleList.businessFrom"
          input-box="showData.businessFrom"
          important="true"
          hms-select="showSelectDiv('business_from')">
        </hms-select-item>
        <hms-select-item
          ng-show="isOrigin"
          label-name="titleList.originalFactoryFrom"
          input-box="showData.originalFactoryFrom"
          important="true"
          hms-select="showSelectDiv('business_from_source')">
        </hms-select-item>
        <hms-select-item
          label-name="titleList.theCompany"
          input-box="showData.theCompany"
          important="true"
          hms-select="showSelectDiv('company')">
        </hms-select-item>
        <hms-select-item
          label-name="titleList.prjBeginDate"
          input-box="data.prjBeginDate"
          important="true"
          hms-select="selectDate('startDate')"
          img-url="build/img/application/opportunity/icon_day.png">
        </hms-select-item>
        <hms-select-item
          label-name="titleList.preSignDate"
          input-box="data.preSignDate"
          important="true"
          hms-select="selectDate('signDate')"
          show-line="true"
          img-url="build/img/application/opportunity/icon_day.png">
        </hms-select-item>
      </div>

    </div>
     <!--竞争对手-->
    <!--<div class="common-input-area">-->
      <!--<div class="common-input-area-title" ng-click="hideArea(1)">-->
        <!--<img src="build/img/application/opportunity/opportunity-add/icon_pk_blue@3x.png"/>-->
        <!--{{ 'NEW_OPPORTUNITY.COMPETITORS' | T }}-->
        <!--<div>{{hideAreaFlag[1] ? ("SHOW" | T) : ("HIDE" | T) }}</div>-->
      <!--</div>-->
      <!--<div ng-if="!hideAreaFlag[1]">-->
        <!--<div ng-repeat="competitor in competitors">-->
          <!--<div class="common-input-area-subtitle has-bottom-border text-black" ng-class="{true:'has-top-border'}[$index > 0]">-->
            <!--{{competitor.fullName}}-->
            <!--<img src="build/img/application/opportunity/opportunity-add/icon_delete@3x.png"-->
                 <!--ng-click="removeCompetitor($index)"/>-->
          <!--</div>-->
          <!--<div>-->
            <!--<hms-input-item-->
              <!--label-name="titleList.productName"-->
              <!--input-box="competitor.productName">-->
            <!--</hms-input-item>-->
            <!--<hms-input-item-->
              <!--label-name="titleList.advantage"-->
              <!--input-box="competitor.advantage">-->
            <!--</hms-input-item>-->
            <!--<hms-input-item-->
              <!--label-name="titleList.otherDescription"-->
              <!--input-box="competitor.description">-->
            <!--</hms-input-item>-->
          <!--</div>-->
        <!--</div>-->

        <!--<div class="common-input-area-subtitle" ng-class="{true:'has-top-border'}[competitors.length > 0]"-->
             <!--ng-click="showAddCompetitor(true)">-->
          <!--{{ 'NEW_OPPORTUNITY.ADD_COMPETITORS' | T }}-->
          <!--<img src="build/img/application/opportunity/opportunity-add/icon_addmore@3x.png"/>-->
        <!--</div>-->
      <!--</div>-->

    <!--</div>-->

    <!--所属团队-->
    <div class="common-input-area">
      <div class="common-input-area-title" ng-click="hideArea(2)">
        <img src="build/img/application/opportunity/opportunity-add/icon_team@3x.png"/>
        {{ 'NEW_OPPORTUNITY.BELONG' | T }}
        <div>{{hideAreaFlag[2] ? ("SHOW" | T) : ("HIDE" | T) }}</div>
      </div>
      <div ng-if="!hideAreaFlag[2]">
        <hms-select-item
          label-name="titleList.saleBelong"
          input-box="showData.saleBelong"
          important="true"
          hms-select="showSaleSelect()"
          show-line="true">
        </hms-select-item>
      </div>
    </div>

    <div class="common-input-area">
      <div class="common-input-area-title" ng-click="hideArea(3)">
        <img src="build/img/application/opportunity/opportunity-add/icon_other@3x.png"/>
        {{ 'OTHER' | T }}
        <div>{{hideAreaFlag[3] ? ("SHOW" | T) : ("HIDE" | T) }}</div>
      </div>
      <div ng-if="!hideAreaFlag[3]">

        <hms-input-item
          label-name="titleList.description"
          input-box="data.description"
          show-bottom-line="true">
        </hms-input-item>
      </div>
    </div>

  </ion-content>

  <!--所属选择区域-->
  <div class="common-fix-div" ng-class="{true:'showUp'}[showSaleSelectFlag]">
    <div class="common-fix-div-header">
      <img src="build/img/application/customer/detail/top_left_arrow@3x.png" ng-click="saleBack()"/>
      请选择
    </div>
    <div class="sifting-area">
      <img src="build/img/application/opportunity/icon_top_search@3x.png">
      <input type="text" placeholder="搜索..."/>
    </div>
    <div class="value-list-header">
      {{showSaleTeam ? showData.saleArea : '所属区域'}}
    </div>
    <div class="list list-has-header">
      <ion-scroll direction="y" has-bouncing="true" scrollbar-y="false" delegate-handle="saleScroll">
        <div class="list-item" ng-repeat="saleArea in saleAreas" ng-click="selectArea(saleArea)" ng-hide="showSaleTeam">
          {{saleArea.saleAreaName}}
          <img src="build/img/application/opportunity/right_arrow@3x.png"/>
        </div>
        <div class="list-item" ng-repeat="saleTeam in saleTeams" ng-click="selectTeam(saleTeam)" ng-show="showSaleTeam">
          {{saleTeam.saleTeamName}}
        </div>
      </ion-scroll>
    </div>
  </div>

  <!--所属行业选择-->
  <div class="common-fix-div" ng-class="{true:'showUp'}[showIndustrySelectFlag]">
    <div class="common-fix-div-header">
      <img src="build/img/application/customer/detail/top_left_arrow@3x.png" ng-click="industryBack()"/>
      请选择
    </div>
    <div class="sifting-area">
      <img src="build/img/application/opportunity/icon_top_search@3x.png">
      <input type="text" placeholder="搜索..."/>
    </div>
    <div class="value-list-header">
      {{showSubIndustry ? showData.majorIndustry : '主行业'}}
    </div>
    <div class="list list-has-header">
      <ion-scroll direction="y" has-bouncing="true" scrollbar-y="false" delegate-handle="industryScroll">
        <div class="list-item" ng-repeat="industry in majorIndustrys" ng-click="selectMajor(industry)" ng-hide="showSubIndustry">
          {{industry.industryName}}
          <img src="build/img/application/opportunity/right_arrow@3x.png"/>
        </div>
        <div class="list-item" ng-repeat="industry in subIndustrys" ng-click="selectSub(industry)" ng-show="showSubIndustry">{{industry.industryName}}</div>
      </ion-scroll>
    </div>
  </div>

</ion-modal-view>
