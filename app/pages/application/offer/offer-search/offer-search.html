<ion-modal-view class="crm offer-search">
  <ion-header-bar class="bar-stable" align-title="center">
    <form ng-submit="searchResult(selectParam)" class="form-style">
      <div class="transmit-search">
        <div class="transmit-button">
          <img src="build/img/contact/icon_search@3x.png" style="">
        </div>
        <input id="offerInputSearch" placeholder="输入关联客户、{{type == 'HCRM_CLUE' ? '线索' : '商机'}}名进行搜索"
               ng-model="offerSearchListParam.opportunityName"
               ng-change="searchWholeData()" type="search">
        <img src="build/img/application/icon_circle@3x.png" class="employee-clear-img"
             ng-if="offerSearchListParam.opportunityName!=''"
             ng-click="clearInputContent()"/>
      </div>
    </form>
    <div class="buttons transmit-buttons">
      <button class="button button-icon icon button-text" ng-click="hideSearch()">
        <span>{{'CANCEL'| T }}</span>
      </button>
    </div>
  </ion-header-bar>
  <ion-content class="employee-search-content">
    <div class="hideContent" ng-hide="showContent">
      <div class="hide-icon">
        <ion-spinner icon="ios-small" class="spinner spinner-ios"></ion-spinner>
      </div>
    </div>
    <div ng-show="showContent">
      <div ng-if="historys.length==0&&offerSearchListParam.opportunityName==''">
        <div class="history-img" align="center"  scroll-height-img>
          <div>
            <img src="build/img/application/search_miss@3x.png">
          </div>
          <div class="with-margin">
            {{'GLOBEL_SEARCH.NO_HISTORY'|T}}
          </div>
        </div>
      </div>
      <div ng-if="historys.length !== 0&&offerSearchListParam.opportunityName==''" class="searchResult" >

        <div class="row history-logo-wrap" >
          <span class="col-25 history-logo col-center"> {{'GLOBEL_SEARCH.HISTORY_RECORD'|T}}</span>
        </div>
        <div class="row" ng-repeat="history in historys">
        <div class="col col-90" ng-click="chooseHistory(history)">
        <div class="row" style="display: block;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;">{{history.customerName}}</div>
        <div class="row"  style="display: block;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;color:#646B74;">{{history.fullName}}</div>
        </div>
        <div class="col col-10" ng-click="deleteItem(values,$index)">
        <img src="build/img/application/icon_wrong@3x.png" style="width: 25px;
    position: relative;
    top: 10px;
    right: 10px;">
        </div>
        </div>
        <div class="clear-button" align="center">
          <img src="build/img/application/icon_delete_blue@3x.png">

          <div class="button button-clear" ng-if="historys.length !== 0" ng-click="deleteHistory()">
            {{'GLOBEL_SEARCH.CLEAR_DATA'|T}}
          </div>
        </div>
      </div>
      <div id="dataS" ng-repeat="item in searchData" ng-if="offerSearchListParam.opportunityName!=''">
        <div class="repeat-arrow" >
          <div class=" repeat-item" ng-repeat="x in item.data" ng-click="chooseCustomer(x)">
            <div class="content-style" ng-bind-html="x.opportunityName " ></div>
            <div style="display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;color:#646B74;font-size: 15px;" ng-bind-html="x.customerName"></div>
          </div>
        </div>
      </div>
      <ion-infinite-scroll
        on-infinite="loadMore()"
        distance="1%"
        ng-if="moreDataCanBeLoaded">
      </ion-infinite-scroll>

    </div>
  </ion-content>
</ion-modal-view>
